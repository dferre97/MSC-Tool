
  \begin{center}
      \begin{tikzpicture}[>=stealth,node distance=3.4cm,shorten >=1pt,
      every state/.style={text=black, scale =0.65}, semithick,
        font={\fontsize{8pt}{12}\selectfont}]
    \begin{scope}[->]
	      \node[state,initial,initial text={}] (q0)  {$\ell_p^0$};
	      \node[state, right of=q0] (q1)  {$\ell_p^1$};
				\node[state, right of=q1] (q2) {$\ell_p^2$};

	    	\path (q0) edge node [above] {$\send{p}{q}{\msg_1}$} (q1);
				\path (q1) edge[bend left = 10] node [above] {$\send{p}{q}{\msg_1}$}(q2);
				\path (q2) edge[bend left = 10] node [below] {$\rec{q}{p}{\msg_2}$}(q1);

	    	\node[rectangle, thick, draw] at (-0.7,0.5) {$A_p$};
	  \end{scope}

		\begin{scope}[->, shift={(0,-1.5)}]
	      \node[state,initial,initial text={}] (q0)  {$\ell_q^0$};
				\node[state, right of=q0] (q1)  {$\ell_q^1$};

				\path (q0) edge[bend left = 10] node [above] {$\send{q}{p}{\msg_2}$} (q1);
        \path (q1) edge[bend left = 10] node [below] {$\rec{p}{q}{\msg_1}$} (q0);

    		\node[rectangle, thick, draw] at (-0.7,0.5) {$A_q$};


	  \end{scope}

	\end{tikzpicture}
	\captionof{figure}{System $\systemuniver$ }
	\label{fig:system_univer}

  \end{center}
